<lib-nc-popup *ngIf="show"
              title="Connecting devices"
              submitBtnText="Continue"
              [toolbox]="!connecting"
              (submitted)="close()"
              (canceled)="canceled.emit(true)">
    <div *ngIf="schemasRequired.length !== 0" class="mb-4 text-center">
        <h2 class="text-error">Missing schemas</h2>
        <p *ngFor="let schema of schemasRequired">{{schema['name']}}@{{schema['revision']}}</p>
        <label for="schema_upload">Upload schemas</label><br>
        <input type="file" multiple value="Upload schemas"
               placeholder="Upload schemas..."
               id="schema_upload"
               name="schema_upload"
               (change)="uploadSchemas($event)"
        >
        <button class="btn btn-danger" (click)="skipSchemaUpload()">Skip schema upload</button>
    </div>
    <table class="table table-hover">
        <thead>
        <tr>
            <th>Device name</th>
            <th>Address:port</th>
            <th>Username</th>
            <th>Hostkey</th>
            <th>Status</th>
            <th></th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let device of devices">
            <td>{{device.name ? device.name : ""}}</td>
            <td>{{device.hostname}}:{{device.port}}</td>
            <td>{{device.username}}</td>
            <td>{{device.hostkey ? device.hostkey: ""}}</td>
            <td [class.text-error]="device.status > 1">{{device.status | connectionStatus}} <i *ngIf="device.status <= 0"
                                    class="fa fa-spinner fa-pulse fa-fw"></i></td>
            <td>
                <input *ngIf="device.status === 3" type="text" class="nc-input" placeholder="Enter password">
                <button *ngIf="device.status === 3" class="btn btn-primary">Connect</button>
            </td>
        </tr>
        </tbody>
    </table>

</lib-nc-popup>
