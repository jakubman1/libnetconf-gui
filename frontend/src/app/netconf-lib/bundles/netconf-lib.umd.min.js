!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/router"),require("rxjs"),require("rxjs/operators"),require("@angular/core"),require("@angular/common/http")):"function"==typeof define&&define.amd?define("netconf-lib",["exports","@angular/common","@angular/router","rxjs","rxjs/operators","@angular/core","@angular/common/http"],t):t(e["netconf-lib"]={},e.ng.common,e.ng.router,e.rxjs,e.rxjs.operators,e.ng.core,e.ng.common.http)}(this,function(e,t,n,o,r,i,s){"use strict";var c=function(){function e(){}return e.prototype.editConfig=function(e,t,n){},e.prototype.commitChanges=function(e){},e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ngInjectableDef=i.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}(),a=function(){function e(){}return e.prototype.provideExample=function(){return"Example service works!"},e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[]},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e}();function d(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function l(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(o=i.next()).done;)s.push(o.value)}catch(c){r={error:c}}finally{try{o&&!o.done&&(n=i["return"])&&n.call(i)}finally{if(r)throw r.error}}return s}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(l(arguments[t]));return e}var p=function(){function e(){}return e.prototype.ngOnInit=function(){},e.decorators=[{type:i.Component,args:[{selector:"lib-nc",template:"\n    <p>\n      netconf-lib works!\n    </p>\n  "}]}],e.ctorParameters=function(){return[]},e}(),h=function(){function e(e){this.http=e,this._connectedDevices=[],this.connectedDevicesChanged=new i.EventEmitter}return Object.defineProperty(e.prototype,"connectedDevices",{get:function(){return this._connectedDevices},set:function(e){this._connectedDevices=e,this.connectedDevicesChanged.emit(e)},enumerable:!0,configurable:!0}),e.prototype.getConnectedDevices=function(){return this.connectedDevices},e.prototype.getSavedDevices=function(){return this.http.get("/netconf/devices")},e.prototype.saveDevice=function(e,t,n,o,r,i){void 0===o&&(o=""),void 0===r&&(r=""),void 0===i&&(i=!1);var s={fingerprint:"",id:"",name:o,hostname:e,port:t,username:n,password:r};return i&&this.connectToDevice(s).subscribe(),this.http.post("/netconf/device",{device:s})},e.prototype.connectToDevice=function(e){var t={name:e.name,hostname:e.hostname,port:e.port,username:e.username,password:e.password};return this.http.post("/netconf/connect",t)},e.prototype.getCompatibleDevices=function(e){return this.connectedDevices},e.decorators=[{type:i.Injectable}],e.ctorParameters=function(){return[{type:s.HttpClient}]},e}(),f=function(){function e(e){this.deviceService=e,this.schemaFilter="",this.vertical=!1,this.compatibleDevices=[]}return e.prototype.ngOnInit=function(){},e.decorators=[{type:i.Component,args:[{selector:"lib-device-quickswitch",template:"\n    <p>\n      tbd\n    </p>\n  "}]}],e.ctorParameters=function(){return[{type:h}]},e.propDecorators={schemaFilter:[{type:i.Input}],vertical:[{type:i.Input}]},e}(),m=function(){function e(e){this.http=e,this._sessions=[],this.sessionsChanged=new i.EventEmitter}return Object.defineProperty(e.prototype,"sessions",{get:function(){return this._sessions},set:function(e){this._sessions=e,this.sessionsChanged.emit(e)},enumerable:!0,configurable:!0}),e.prototype.addSession=function(e,t){if(this.doesSessionExists(e)){var n=this.findSessionIndex(e);this._sessions[n].device=t,this.sessionsChanged.emit(this.sessions)}else{var o=this.sessions;o.push({key:e,device:t}),this.sessions=o}},e.prototype.destroySession=function(e){var t=this,n=this.findSessionIndex(e);return this.http["delete"]("/netconf/session/"+e).pipe(r.tap(function(e){t._sessions.splice(n,1),t.sessionsChanged.emit(t.sessions)}))},e.prototype.loadOpenSessions=function(){return this.http.get("/netconf/sessions")},e.prototype.destroyAllSessions=function(){return this.http["delete"]("/netconf/sessions")},e.prototype.sessionAlive=function(e){return this.http.get("/netconf/session/alive/"+e)},e.prototype.doesSessionExists=function(e){var t,n;try{for(var o=d(this._sessions),r=o.next();!r.done;r=o.next()){if(r.value.key===e)return!0}}catch(i){t={error:i}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(t)throw t.error}}return!1},e.prototype.findSessionIndex=function(t){return this._sessions.findIndex(function(e){return e.key===t})},e.prototype.getCompatibleDeviceSessions=function(e){return 0===this.sessions.length?this.loadOpenSessions():o.of(this.sessions)},e.prototype.rpcGet=function(e,t,n){var o=(new s.HttpParams).append("key",e).append("recursive",t?"true":"false");return n&&o.append("path",n),this.http.get("/netconf/session/rpcGet",{params:o})},e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:s.HttpClient}]},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e(i.inject(s.HttpClient))},token:e,providedIn:"root"}),e}(),b=function(){function e(e){this.sessionService=e,this.schemaFilter="",this.devicesSelected=new i.EventEmitter,this.compatibleDevices=[],this.errorMessage=""}return e.prototype.ngOnInit=function(){this.reload()},e.prototype.areDevicesSelected=function(){var e,t;try{for(var n=d(this.compatibleDevices),o=n.next();!o.done;o=n.next()){if(o.value.selected)return!0}}catch(r){e={error:r}}finally{try{o&&!o.done&&(t=n["return"])&&t.call(n)}finally{if(e)throw e.error}}return!1},e.prototype.setAllSelectionsTo=function(e){var t,n;try{for(var o=d(this.compatibleDevices),r=o.next();!r.done;r=o.next()){r.value.selected=e}}catch(i){t={error:i}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(t)throw t.error}}},e.prototype.submit=function(){var e,t;if(this.areDevicesSelected()){var n=[];try{for(var o=d(this.compatibleDevices),r=o.next();!r.done;r=o.next()){var i=r.value;i.selected&&n.push(i.session)}}catch(s){e={error:s}}finally{try{r&&!r.done&&(t=o["return"])&&t.call(o)}finally{if(e)throw e.error}}this.devicesSelected.emit(n),this.errorMessage=""}else this.errorMessage="No devices selected"},e.prototype.reload=function(){var c=this;this.sessionService.getCompatibleDeviceSessions("").subscribe(function(e){var t,n;try{for(var o=d(e),r=o.next();!r.done;r=o.next()){var i=r.value;c.compatibleDevices.push({session:i,selected:!0})}}catch(s){t={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(t)throw t.error}}}),this.sessionService.sessionsChanged.subscribe(function(e){var t,n;try{for(var o=d(e),r=o.next();!r.done;r=o.next()){var i=r.value;c.compatibleDevices.push({session:i,selected:!0})}}catch(s){t={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(t)throw t.error}}})},e.decorators=[{type:i.Component,args:[{selector:"lib-device-selection",template:'<lib-content-box [title]="\'Select devices to configure\'" [limitWidth]="true">\r\n  <div class="toolbox mb-3">\r\n    <button class="btn btn-secondary" (click)="setAllSelectionsTo(true)">Select all</button>\r\n    <button class="btn btn-secondary" (click)="setAllSelectionsTo(false)">Unselect all</button>\r\n    <button class="btn btn-secondary" (click)="reload()">Reload device list</button>\r\n    <button class="btn btn-primary right">Connect a new device</button>\r\n  </div>\r\n  <div *ngIf="compatibleDevices.length > 0" class="row">\r\n    <div class="col-sm-12 col-md-4 pl-3 pr-3 p-2" *ngFor="let session of compatibleDevices">\r\n      <lib-device-selection-item [device]="session.session.device"\r\n                                 [(selected)]="session.selected"\r\n      ></lib-device-selection-item>\r\n    </div>\r\n  </div>\r\n  <div *ngIf="compatibleDevices.length === 0">\r\n    <h2 class="text-center">No compatible devices connected.</h2>\r\n  </div>\r\n  <div class="toolbox mt-3">\r\n    <a routerLink="/netconf/tools" class="btn btn-danger">Cancel</a>\r\n    <button class="btn btn-primary right" (click)="submit()">Configure</button>\r\n  </div>\r\n  <p class="error-text text-right">{{errorMessage}}</p>\r\n</lib-content-box>\r\n\x3c!--<div class="box">\r\n  <div class="box-header">\r\n    Select devices to configure\r\n  </div>\r\n  <div class="box-content box-content-limited">\r\n\r\n  </div>\r\n</div>\r\n--\x3e\r\n',styles:['.btn{margin-right:5px}.box{margin-bottom:10px;background:#fff;border-radius:5px;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23)}.box-header{background:#008545;width:100%;font-size:1.5rem;border-radius:5px 5px 0 0;color:#fff;padding:5px 10px;text-align:center}.box-content{padding:5px 10px}.box-content-limited{max-width:1200px;margin-left:auto;margin-right:auto}.clickable{cursor:pointer}.clickable::-moz-selection{background:0 0;color:#231f20}.clickable::-moz-selection,.clickable::selection{background:0 0;color:#231f20}.error-text{color:#ee1d23}.checkbox-container{display:block;position:relative;padding-left:35px;margin-bottom:32px;cursor:pointer;font-size:22px;line-height:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:150ms ease-in-out}.checkbox-container input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkbox-container:hover input~.checkmark{background-color:#00b55d}.checkbox-container input:checked~.checkmark{background-color:#231f20}.checkbox-container input:checked~.checkmark:after{display:block}.checkbox-container .checkmark:after{left:7px;top:-1px;width:12px;height:22px;border:solid #fff;border-width:0 4px 4px 0;border-radius:2px;transform:rotate(45deg)}.checkmark{position:absolute;top:0;left:0;height:32px;width:32px;background-color:#fff;border:3px solid #231f20;border-radius:5px;transition:150ms ease-in-out}.checkmark:after{content:"";position:absolute;display:none}.device-selection-title{font-size:1.2em;margin-bottom:0}.device-name{font-weight:700;margin-right:.5rem}.device-item{cursor:pointer;border:2px solid #016d39;background:#fff;border-radius:5px;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);margin-bottom:0}.hostname{font-size:.8em;white-space:nowrap;display:inline-block;color:rgba(35,31,32,.7)}.toolbox{width:100%}@media only screen and (min-width:600px){.toolbox{display:flex}}.toolbox .right{margin-left:auto}']}]}],e.ctorParameters=function(){return[{type:m}]},e.propDecorators={schemaFilter:[{type:i.Input}],devicesSelected:[{type:i.Output}]},e}(),g=function(){function e(){this.selectedChange=new i.EventEmitter,this.compatibleDevices=[]}return e.prototype.ngOnInit=function(){},e.prototype.changeSelection=function(){this.selectedChange.emit(!this.selected)},e.decorators=[{type:i.Component,args:[{selector:"lib-device-selection-item",template:'<div class="container-fluid device-item clickable" (click)="changeSelection()">\r\n  <div class="row p-2">\r\n    <div class="col-sm-9 col-md-10">\r\n      <p class="device-selection-title">\r\n        <span class="device-name"> {{device.hostname}}:{{device.port}}</span>\r\n        <span class="hostname" *ngIf="device.name">{{device.name}}</span>\r\n      </p>\r\n      <p class="mb-0">{{device.username}}</p>\r\n    </div>\r\n    <div class="col-sm-3 col-md-2">\r\n      <label class="checkbox-container">\r\n        <input type="checkbox" [checked]="selected" (change)="changeSelection(); $event.stopPropagation()">\r\n        <span class="checkmark"></span>\r\n      </label>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n',styles:['.btn{margin-right:5px}.box{margin-bottom:10px;background:#fff;border-radius:5px;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23)}.box-header{background:#008545;width:100%;font-size:1.5rem;border-radius:5px 5px 0 0;color:#fff;padding:5px 10px;text-align:center}.box-content{padding:5px 10px}.box-content-limited{max-width:1200px;margin-left:auto;margin-right:auto}.clickable{cursor:pointer}.clickable::-moz-selection{background:0 0;color:#231f20}.clickable::-moz-selection,.clickable::selection{background:0 0;color:#231f20}.error-text{color:#ee1d23}.checkbox-container{display:block;position:relative;padding-left:35px;margin-bottom:32px;cursor:pointer;font-size:22px;line-height:1;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:150ms ease-in-out}.checkbox-container input{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.checkbox-container:hover input~.checkmark{background-color:#00b55d}.checkbox-container input:checked~.checkmark{background-color:#231f20}.checkbox-container input:checked~.checkmark:after{display:block}.checkbox-container .checkmark:after{left:7px;top:-1px;width:12px;height:22px;border:solid #fff;border-width:0 4px 4px 0;border-radius:2px;transform:rotate(45deg)}.checkmark{position:absolute;top:0;left:0;height:32px;width:32px;background-color:#fff;border:3px solid #231f20;border-radius:5px;transition:150ms ease-in-out}.checkmark:after{content:"";position:absolute;display:none}.device-selection-title{font-size:1.2em;margin-bottom:0}.device-name{font-weight:700;margin-right:.5rem}.device-item{cursor:pointer;border:2px solid #016d39;background:#fff;border-radius:5px;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);margin-bottom:0}.hostname{font-size:.8em;white-space:nowrap;display:inline-block;color:rgba(35,31,32,.7)}.toolbox{width:100%}@media only screen and (min-width:600px){.toolbox{display:flex}}.toolbox .right{margin-left:auto}']}]}],e.ctorParameters=function(){return[]},e.propDecorators={device:[{type:i.Input}],selected:[{type:i.Input}],selectedChange:[{type:i.Output}]},e}(),v=function(){function e(){this.title="",this.limitWidth=!1}return e.prototype.ngOnInit=function(){},e.decorators=[{type:i.Component,args:[{selector:"lib-content-box",template:'\n    <div class="content-box">\n      <div class="box-header" *ngIf="title">{{title}}</div>\n      <div class="box-content" [class.box-content-limited]="limitWidth">\n          <ng-content></ng-content>\n      </div>\n    </div>\n  ',styles:[".content-box{margin-bottom:10px;background:#fff;border-radius:5px;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23)}.box-header{background:#008545;width:100%;font-size:1.5rem;border-radius:5px 5px 0 0;color:#fff;padding:5px 10px;text-align:center}.box-content{padding:5px 10px}.box-content-limited{max-width:1200px;margin-left:auto;margin-right:auto}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={title:[{type:i.Input}],limitWidth:[{type:i.Input}]},e}(),x=function(){function e(){this.title="",this.toolbox=!0,this.submitBtnText="Submit",this.canceled=new i.EventEmitter,this.submitted=new i.EventEmitter}return e.prototype.ngOnInit=function(){},e.prototype.cancel=function(){this.canceled.emit(!0)},e.prototype.submit=function(){this.submitted.emit(!0)},e.decorators=[{type:i.Component,args:[{selector:"lib-nc-popup",template:'\n    <div class="popup-wrapper">\n      <div class="popup-content">\n        <div *ngIf="title !== \'\'" class="popup-header">{{title}}</div>\n        <ng-content></ng-content>\n        <div class="popup-toolbox" *ngIf="toolbox">\n          <button class="btn btn-danger" (click)="cancel()">Cancel</button>\n          <button class="btn btn-primary float-right" (click)="submit()">{{submitBtnText}}</button>\n        </div>\n      </div>\n    </div>\n  ',styles:[".popup-wrapper{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.7);z-index:9999}.popup-content{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);max-width:100vw;max-height:100vh;overflow:auto;padding:10px;background:#fff;border:3px solid #fff;border-radius:5px}.popup-header{width:calc(100% + 20px);margin:-10px -10px 10px;background:#008545;color:#fff;border-radius:5px 5px 0 0;padding:5px;font-size:1.3rem;text-align:center}.popup-toolbox{background:#fafafa;width:calc(100% + 20px);margin:10px -10px -20px;padding:10px}"]}]}],e.ctorParameters=function(){return[]},e.propDecorators={title:[{type:i.Input}],toolbox:[{type:i.Input}],submitBtnText:[{type:i.Input}],canceled:[{type:i.Output}],submitted:[{type:i.Output}]},e}(),y=function(){function e(e){this.http=e}return e.newlineToBr=function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;","/":"&#x2F;"};return e.replace(/[&<>\/]/g,function(e){return t[e]}).replace(/\n/g,"<br>").replace(/\t/g,"&nbsp;")},e.formatYang=function(e){var t,n,o=u(e),r=!1,i=!1,s="";try{for(var c=d(o),a=c.next();!a.done;a=c.next()){var l=a.value;switch(l){case"{":s+=r||i?l:l+'<div class="level">';break;case"}":s+=r||i?l:"</div>"+l;break;case'"':s+=r?l+"</span>":'<span class="string">'+l,r=!r;break;case"'":r?s+=l:(s+=i?l+"</span>":'<span class="pattern">'+l,i=!i);break;default:s+=l}}}catch(p){t={error:p}}finally{try{a&&!a.done&&(n=c["return"])&&n.call(c)}finally{if(t)throw t.error}}return s},e.prototype.getSchemaNames=function(){return this.http.get("/netconf/schemas")},e.prototype.getSchema=function(e){return this.http.get("/netconf/schema/"+e)},e.prototype.removeSchema=function(e){return this.http["delete"]("/netconf/schema/"+e)},e.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:s.HttpClient}]},e.ngInjectableDef=i.defineInjectable({factory:function(){return new e(i.inject(s.HttpClient))},token:e,providedIn:"root"}),e}(),k=function(){function e(e){this.schemasService=e,this.selected="",this.loading=!1,this.error="",this.schemas=[]}return e.prototype.ngOnInit=function(){var t=this;this.loading=!0,this.schemasService.getSchemaNames().subscribe(function(e){t.schemas=e,t.loading=!1},function(e){t.error=e.message,t.loading=!1})},e.prototype.removeSchema=function(n){var o=this;confirm("Do you really want to remove "+n+"?")&&(this.loading=!0,this.schemasService.removeSchema(n).subscribe(function(e){var t=o.schemas.indexOf(n);o.schemas.splice(t,1),e.success||(o.error=e.message),o.loading=!1},function(e){o.error=e.message,o.loading=!1}))},e.decorators=[{type:i.Component,args:[{selector:"lib-schema-list",template:'<h3 *ngIf="loading">Loading schemas...</h3>\n<div *ngIf="!loading">\n  <p class="text-danger" *ngIf="error">{{error}}</p>\n  <p>Click on schema name to view detail</p>\n  <ul class="schema-list">\n    <li *ngFor="let schema of schemas">\n      <a class="schema-link" title="View detail" [class.selected]="schema === selected"\n         [routerLink]="[\'/netconf\', \'tool\',\'yang-explorer\',{\'schema\': schema}]">{{schema}}</a>\n      <i class="fa fa-trash remove-schema" aria-hidden="true" (click)="removeSchema(schema)" title="Remove schema"></i>\n      <span class="sr-only" (click)="removeSchema(schema)">Remove</span>\n    </li>\n  </ul>\n</div>\n',styles:['.schema-list{list-style-type:none}.schema-link{font-family:"JetBrains Mono","Source Code Pro",Consolas,monospace;color:#231f20;text-decoration:none}.schema-link:hover{text-decoration:underline;color:#0068a2}.schema-link.selected{color:#0068a2;font-weight:bolder}.remove-schema{cursor:pointer;margin-left:20px}.remove-schema:hover{color:red}']}]}],e.ctorParameters=function(){return[{type:y}]},e.propDecorators={selected:[{type:i.Input}]},e}(),w=[p,f,b,g,v,x,k],S=function(){function e(){}return e.decorators=[{type:i.NgModule,args:[{imports:[t.CommonModule,n.RouterModule,s.HttpClientModule],declarations:u(w),exports:u(w),providers:[h]}]}],e}();e.NetconfLibService=a,e.ConfigurationService=c,e.NetconfLibModule=S,e.SessionService=m,e.DeviceService=h,e.SchemasService=y,e.ɵe=v,e.ɵb=f,e.ɵc=b,e.ɵf=x,e.ɵg=k,e.ɵd=g,e.ɵa=p,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=netconf-lib.umd.min.js.map